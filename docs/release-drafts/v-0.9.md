# Release v.0.9

_Released on Friday April 30th, 2021_

Short description of the overall release, its included features and its impact on the final product.
#### RTree:
The RTree is not yet done. This is still a work in progress. Though it has come quite far and has expanded to be quite large, therefore this PR is made, to reduce the differences between it and Master - as well as letting other branches work with the RTree.
The RTree is made up of RTreeNodes and RTreeLeaves.
Nodes are rectangular areas that hold other RTreeNodes.
Leaves are sub-types of Nodes, that also have a list of Drawable elements. A leaf has no descendants besides the Drawable List, which is a list of the drawables contained within the leafs area.
General traversal of the RTree is done by moving through and into RTreeNodes until you reach an RTreeLeaf, which then holds the data we are interrested in and is processed before continuing the query.

#### Rectangles:
Rectangles are made for all Drawable objects (the Drawable interface now has a getRect() method).
Rectangles are used for Querying about an objects location. They are also used in tandem with Cities to help center the text of the cities Name.
Rectangles are created at the end of parsing.

#### Debug tool:
Currently it draws a rectangle in the center of the screen and then draws all RTreeNode Rectangles inside of it. The RTree structure is due to change, so this part of the program will most likely also be changed.

#### Nearest Node On Nearest Way:
The Nearest Node is found by first finding the nearest way with some line-projection math, and then finding the nearest Node in the list of nodes from the nearest way.

#### City update
Cities now have more robust constructors, and a few aditional fields to help with the draw method.
The Draw method now centers the text, by placing it in the middle of the cities Relation/Way's rectangle, instead of at the first node of the Relation/Way's first node.

#### Astar
We now take speeds into account, which means that in calculating the cost of the best route, we prioritize fast routes. This means that we can also display the total travel time of a route, also depending on which type of transportation you choose. 

We have made UI and A* work together which means we have different icons for the different directions which get sent along with each step.

If a route cant be found we handle it by creating a deafult Step object that outputs an error message int the routeContainer.

We fixed a bug where several calls to Astar search would cause a OutOfMememory exception since we did set node parents to null after a search.

#### Minor additions

Fixed an issue where suggestions would be saved between changing tabs, and therefore not overwritten by new suggestions.

### Added 
- RTree (version 1.2)
    - RTreeNode
    - RTreeLeaf
    - Rectangles
    - Debug checkbox and functionality for showing r-tree
    - Nearest NodeOnNearestWay
    - Tests
    
- A* classes and enums (#208)
    - AStar
    - Edge
    - Step 
    - Direction
    - TransportType
    - AStarTest

- A* related fields and methods to Way class
- Adjacencies and scores to Node class
- Link roads to our list of tags
- UI for A* in Controller and FXML


### Changed

- Changed the way we load files to accommodate both `.jar` files and files directly from the users machine #207
- Fix suggestions (#203)
- City

### Removed

### Performance Improvements

| Dell XPS15 9500 | FPS (Time to draw) | Average RAM Usage | Peak RAM Usage | TTI (Time to interactive) |
| --------------- | ------------------ | ----------------- | -------------- | ------------------------- |
| This Week       | ~-ms               | ~-mB              | -mB            | -s                        |
| Last Week       | ~3ms               | ~57mB             | 162mB          | 2,91s                     |

| MacBook Pro (Late 2014) | FPS (Time to draw) | Average RAM Usage | Peak RAM Usage | TTI (Time to interactive) |
| ----------------------- | ------------------ | ----------------- | -------------- | ------------------------- |
| This Week               | ~-ms               | ~-mB              | ~-mB           | -s                        |
| Last Week               | ~7ms               | ~80mB             | ~105mB         | 7,776s                    |

### Feedback

### Next week

Next week we will focus on...
